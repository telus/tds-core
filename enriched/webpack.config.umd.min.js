var webpack = require('webpack');
var ExtractTextPlugin = require("extract-text-webpack-plugin");
var config = require('./webpack.config.base');
var path = require('path');

config.entry = {
  'thorium-enriched': [
    './src/core-styles.js',
    './src/index.js'
  ]
};

config.output = {
  library: 'Thorium',
  libraryTarget: 'umd',
  path: path.join(process.cwd(), 'dist'),
  filename: '[name].min.js',
};

config.module.loaders.push({
  test: /\.(js|jsx)$/,
  loader: 'babel',
  exclude: /node_modules/
});

config.plugins.push(new ExtractTextPlugin('[name].min.css', {
  allChunks: true
}));

config.plugins.push(new webpack.DefinePlugin({
  "process.env": {
    NODE_ENV: JSON.stringify("production"),
    BROWSER: JSON.stringify(true),
    THORIUM_CORE_STYLES: JSON.stringify(true)
  },
  __DEBUG__: true
}));

config.externals = {
  'react': {
    root: 'React',
    commonjs2: 'react',
    commonjs: 'react',
    amd: 'react'
  },
  'react-dom': {
    root: 'ReactDOM',
    commonjs2: 'react-dom',
    commonjs: 'react-dom',
    amd: 'react-dom'
  }
};


module.exports = config;
